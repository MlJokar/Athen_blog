---
layout: doc
last_update: true
---

# 日常实习面试记录

时间大致是在 ```2024-9```到```2024-11```，前前后后投了三个多月的时间

## 1. 京东物流

基本没问项目，主要是对着简历问八股

总共54min

题目忘了🤣



## 2. 美团-到店（CRM）

主要是拷打项目，后面根据简历问了一些八股。结尾也没让我写算法，只让我写了个单例模式。

最后就是反问环节：自己主要的缺点，该怎么去学习；结果需要等几天

总共46min

回忆一下主要问题（顺序可能有些出入）：

**1. Zookeeper的使用场景；有哪些节点类型；你用的是什么节点；为什么用这种节点**
  
zookeeper是一个分布式协调的组件，可以用于配置中心、注册中心等功能，比如这个项目里用到的就是zk作为注册中心；节点类型主要是永久节点、临时节点、永久顺序和临时顺序，这个永久和临时是针对连接的，连接一旦失效（多次心跳探活失败），临时节点就会被删掉。
   
这个项目里用到的也是临时节点，因为假如服务提供者处于断线状态的话要及时把这个给清掉。因为zk节点一个功能就是可以添加监视器watcher，监听节点事件的变化，假如节点断联这个状态触发，就通知后端把本地的对应的缓存给删掉。

**2. 负载均衡算法有哪几种；一致性哈希算法具体讲讲；一致性哈希代码里面怎么实现的（没答出来）**

一致性哈希的话功能是保证来自统一请求方的请求能给交给同一个服务提供者处理（在服务提供者列表没有变化的情况下）。数据结构上是有一个环形数组，假如是提供者的ip地址做hash运算，取模之后映射到hash环上。后面请求方的ip地址进来之后向右查找最近的提供者，这样后续再添加新的提供者，原来的对应关系至少是不会变的。同时这里有一个方法是为了避免映射时候的不均衡，假如说提供者聚集在某一个地方，可以使用添加虚拟节点的方法，查找到虚拟节点会转给真实节点，这样可以让整个hash环上的分布更加均匀。

**3. Netty具体是怎么使用的（答了Reactor模型）；Reactor模型是怎么工作的；多路复用的含义是什么**

Netty是一个高性能的网络通信框架，非阻塞NIO模型， 主要用于网络通信。
   
是基于Reactor的设计模式，只用一个线程管理连接事务，多个线程的事件组处理下游事务。其实就是相当于多路复用的意思，不用每个连接线程都同时管理，只用一个线程去轮询这些socket连接，只要有事件触发了就取出来，交给下游任务去执行。

多路复用的含义大概就是这样一个线程管理多个socket连接，只处理感兴趣的事件。轮询的方式遍历socket连接是select模式和poll模式，还有一个epoll使用的是主动通知的形式，在内核维护一个红黑树存储所有socket连接，有事件触发就转移到一个事件链表，通知这一块是内存共享的，用户和内核映射在同一块真是物理内存上（mmap），减少拷贝一次带来的性能损耗。

**4. 有用过正经的消息队列中间件吗（项目里用的redisson发布订阅）**

**5. Redis的数据结构有哪些（提到json被指正了）；ZSet了解吗，数据结构是什么样的，使用场景一般是什么**

String、list、set、zset、hash、Hyperloglog、bitmap...

zset是redis中的有序数据结构，是用跳表实现的，简单来说就是一张链表上维护者多个不同跨度的索引，从上往下逐级检索可以有效减小索引次数，比起红黑树来说它的维护起来比较简单，因为修改元素时不一定对每一级索引都维护，而且红黑树的调整是比较耗费时间的。

**6. Redis的数据数据持久化有哪些方式；Redis集群的主从同步一般用哪一种（答成aof了🤣）**

redis的数据持久化方式分为两种，一个数据快照RDB一个增量日志aof，他们的区别在于rdb是对当前数据整个备份存储到磁盘，一般是通过fork一个子线程做这件事，不阻塞当前线程，aof是记录增删改操作 集群主从同步也分情况，全量同步和增量同步，


**7. MySQL的存储结构是什么样的；为什么用B+树，相比B树的优势在哪**

**8. MySQL的索引有哪些分类；设置索引的时候有哪些要求；索引优化有哪些思路**

**9. MySQL的锁了解吗；不同的隔离级别对应什么锁；什么关键字对应什么锁；间隙锁在什么时候用；`select for update` 了解吗**（不了解🤣）

**10. JVM了解吗；JVM的内存模型了解吗，大概有什么分区**

**11. TreeSet了解吗（直接说了不知道，寄）**

**12. List有哪些实现类；哪些是线程安全的；`copyOnWriteList`是怎么实现线程安全的**

**13. HTTP和HTTPS的区别（只答了更安全）**

**14. TCP和UDP的区别；TCP怎么保证连接**（三次握手）

**15. 设计模式了解哪些，写个单例，追加了一下线程安全问题怎么加锁**（`volatile` 和 `synchronized`）



## 3. 京东物流复活赛

纯纯八股，半个小时结束了，感觉要凉凉/(ㄒoㄒ)/\~\~

**1. 挑一个比较熟悉的项目介绍**

**2. zookeeper是做什么用的，有了解过其它类似的注册中心吗，有什么区别**

**3. zookeeper原理是什么，怎么做到成为注册中心，基础数据结构是什么（麻了）**

**4. zookeeper集群的选举是怎么进行的，有几种算法；脑裂怎么解决**

**5. zookeeper能做分布式锁吗；除此之外还知道其它分布式锁的实现吗**

**6. redisson分布式锁到期没执行完怎么办（看门狗）；能一直刷新吗**

**7. 其它中间件有了解吗，比如ES**

**8. TCP、UDP、HTTP、HTTPS他们的区别；TCP怎么保证连接的；HTTPS怎么保证安全的**

**9. 访问京东主站，输入URL会发生什么**

**10. 请求状态码知道吗，405、502（麻了）**

**11. for循环删除集合的第一个元素，可行吗，怎么实现；其它删除方法呢；用迭代器能删除吗**

**12. HashMap什么时候用链表，什么时候转红黑树；hashmap底层数据结构是怎么样的；hashmap怎么扩容的；为什么会导致死循环，1.8死循环问题是怎么解决的；hashmap长度为什么要是2的n次方；你看过源码吗**

**13. ConcurrentHashMap怎么做到线程安全的；锁的粒度是多大**

**14. 项目有没有高并发的场景，线程池应该怎么设计；假如现在有一个10ms的cpu密集型操作，核心线程数应该怎么设置**



## 4. 智谱华章

**1. MySQL事务和索引有什么关系；事务隔离级别有几种；幻读怎么解决（间隙锁、MVCC）；间隙锁什么时候加，范围查询一定会加间隙锁吗；常见的索引优化手段有哪些**

**2. spring、spring mvc和spring boot之间是什么关系；boot相比mvc加了哪些东西**

**3. 介绍下IoC和AOP的概念；IoC有什么好处呢，为什么要把bean交给容器管理；bean一定是单例吗**

**4. Kafka、rabbitMQ的消息可靠性投递、重复消费是怎么解决的**

**5. TCP、UDP、HTTP之间有什么区别；HTTP只能用TCP吗**

**6. 介绍一个最熟悉的项目**

**7. 为什么要有5种序列化方式，这些序列化有什么区别**

**8. zookeeper本地缓存监听节点变化是怎么做到的**

**9. 三种负载均衡算法是自己实现的吗，介绍一下有什么区别**

**10. 这个starter自动配置还有别的用法吗**

**11. ops是什么，怎么算的；瓶颈在哪里，cpu、内存还是网络**



## 6. 快手-海外架构

没问啥问题，几分钟后就让我开始手撕了

**1. 介绍一下Netty的使用，这个组件是干什么的，里面大概有几个模块**

**2. 问了一个项目里面Netty的使用细节，channel有没有限制，怎么解决TCP粘包**

**3. epoll的原理是什么**

**4. 为什么要学Netty呢（面试官觉得Netty门槛算是比较高的）**

**5. 手撕：懒汉单例，有加减乘除括号的计算器（一步步优化，最后没写出来，面试官说思路还行）**

**6. volatile和synchronized原理**

- **反问环节：** 门业务方向

## 7. 百川智能

面试官水平很高，基本都是从简历上逐渐延申，慢慢引导，体验挺好的。

**1. 自我介绍**

**2. 介绍项目的主要难点，怎么解决的**

**3. Redis怎么使用，使用场景是什么**

**4. 网络请求被非法拦截了怎么办**（大坑，现在都是https拦截不了；最好的办法也只能是对称加密）

**5. Redis缓存与数据库的一致性怎么保证，延迟双删第二次没删成功怎么办**（有点不理解）

**6. 数据库有几种日志，分别是什么作用**

**7. Redis数据结构，字符串是怎么实现的**（SDS）

**8. Redis数据持久化，两种有什么区别**

**9. i/o多路复用的三种方式，epoll的优点在哪**（主动通知）**，红黑树是什么样的**（不会）

**10. MySQL的索引，B+树的优势，索引失效的场景**

**11. @Transactional什么时候会失效，怎么实现回滚的**

**12. Kafka适合大数据场景的原因**（只答了个零拷贝）

**13. 线程池的几个核心参数，有哪些拒绝策略，用的最多的等待队列是哪个**（ArrayBlockingQueue）

**14. 一道算法：买卖股票的最佳时机**

- **反问环节：** 大模型公司后端的主要业务；自己的表现。



## 8. 掌上先机

**1. 项目难点**

**2. java面向对象的思想是什么样的；java为什么是一个跨平台的语言**

**3. java的值传递和引用传递；基本类型的传递是怎么理解的**（应该是在方法栈创建的临时变量）

**4. 常量池的理解；字面量创建字符串和new一个字符串分别创建了几个对象**（答反了）

**5. 多态的理解；怎么实现多继承的效果；向上转型是什么意思**

**6. 深拷贝和浅拷贝的区别；项目里什么地方会用到这两个拷贝**

**7. List在循环里删除元素会有什么问题**（fori记得break，foreach不行，用迭代器自己的remove可以，stream也可以）

**8. HashMap、HashTable、ConcurrentHashMap的区别；项目里面什么情况才会用线程安全map**（5个线程并发，但是没有公共资源，用哪个）

**9. synchronized加锁原理**

**10. B+输的结构和特点；怎么避免多次回表；mysql的事务隔离级别有哪些**

**11. 描述一个SQL：查处一段时间内，每分钟的订单量排名**（没答上来，需要mod提取时间）

**12. spring循环依赖怎么解决**

**13. controller接受前端请求，除了@RequestBody 和 @RequestParam，有些数据并不在请求体里面应该用哪个注解**

**14. 线程池的几个核心参数以及任务进来之后的流转情况；executors创建的线程池默认等待队列的长度是多少**

**15. 算法题：二叉树最大路径和**

- **反问：** 实习生一般干什么；面试表现如何；啥时候出结果



## 9. 算力大陆

**1. 自我介绍，项目介绍**

**2. Netty、Http、Socket通信的区别；什么是自定义通信协议**

**3. 五种序列化方式分别有什么区别**

jdk序列化使用ObjecOutputStream读取字节流，什么类都能读因此不安全hessian是跨语言的，dubbo用的就是这个，是动态的。protobuf需要和.proto文件配合使用，protostuff是改进版，能够在不损耗性能的前提下不需要编写.proto文件

**4. Netty心跳机制是什么意思；在代码层面是怎么实现的**

通道channel是有状态的，比如说读空闲，触发了这个读空闲之后 // todo

**5. Zookeeper介绍一下，数据结构是什么样的**

zookeeper是一个分布式协调的组件，可以用于配置中心、注册中心等功能，比如这个项目里用到的就是zk座位注册中心；节点类型主要是永久节点、临时节点、永久顺序和临时顺序，这个永久和临时是针对连接的，连接一旦失效（多次心跳探活失败），临时节点就会被删掉。这个项目里用到的也是临时节点，因为假如服务提供者处于断线状态的话要及时把这个给清掉。因为zk节点一个功能就是可以添加监视器watcher，监听节点事件的变化，假如节点断联这个状态触发，就通知后端把本地的对应的缓存给删掉。

**6. 负载均衡算法分别是什么；一致性哈希是怎么实现的，有什么需要注意的点**

一致性hash的特点是，来自同一个请求方的请求会交给同一个服务方，保证一致性。单纯的hash取模法的问题就是新增或减少服务提供者数组长度会发生改变，重新取模后不一定能落在同一个地方。为了避免节点过少的偏斜情况以及节点宕机后流量陡增情况，不直接映射节点，而是为每个节点建立多个虚拟节点，使之均匀的散布在圆环上。

另外一个一致性的算法还有hash槽算法（16384），就是把一个很大的数组分成多个槽位，每个节点分得一定数量的槽位，就算新增或者减少节点，每个节点只需要少许移动部分槽位。

**7. 登录鉴权怎么做的；后续请求借口怎么知道他有没有登录**

一般是把token存到浏览器的local storage里面，后续直接从请求头里面拿

**8. 上传文件、视频是怎么做的；除了存本地还有没有其他的方法**（阿里云OSS服务）

**9. List接口的主要实现类有哪些，他们有什么区别**

ArrayList、LinkedList、CopyOnWriteList

**10. Map有几种能遍历的方式**

keySet、values、EntrySet，set是可以通过增强for循环遍历的

map本身是没有迭代器的，但是可以通过keySet或者EntrySet拿到迭代器进行迭代

**11. stream流什么情况下使用，用的多吗？在性能上和增强for循环比呢**

stream流是将集合处理成几股并行流，利用多核cpu并行计算加快处理速度，在集合数据量比较大的适合增幅明显，因为将集合处理成并行流势必涉及分流合并操作，对于大集合看来有足够收益。并且也只适合cpu密集型的任务。

for循环、forEach、stream()这三个性能上差异是要分情况的：

实现了`randomAccess`接口的，for比forEach快；因为forEach是用迭代器实现的，还要创建一系列的指针，并且迭代器是工作在单独的线程的，如果此时对集合进行修改，会抛出异常。可以使用迭代器自身的remove。

stream与其他的区别就在于数据量，大数据量可能并行计算会更快。

**12. 电商项目的金额字段用什么类型存储（Decimal & BigDecimal）；什么契机了解到的（八股文😅）**

**13. `@Transational`是怎么生效的**（动态代理，增强方法决定要不要提交）

实质是使用了JDBC的事务来进行事务控制，基于AOP实现。

1\) 事务开始时，通过AOP机制，生成一个代理connection对象，

 并将其放入 DataSource 实例的某个与 DataSourceTransactionManager 相关的某处容器中。在接下来的整个事务中，客户代码都应该使用该 connection 连接数据库，执行所有数据库命令。

 \[不使用该 connection 连接数据库执行的数据库命令，在本事务回滚的时候得不到回滚]（物理连接 connection 逻辑上新建一个会话session；DataSource,TransactionManager 配置相同的数据源）

 2\) 事务结束时，回滚在第1步骤中得到的代理 connection 对象上执行的数据库命令，然后关闭该代理 connection 对象。（事务结束后，回滚操作不会对已执行完毕的SQL操作命令起作用）

 方法内部调用可能会失效，除非引入自己的bean或者从全局上下文的bean工厂里面取到bean，因为内部调用有一个隐式指针this指向当前类对象，无法使用代理生成的对象进行事务管理。

 事务方法内启动新的线程也会导致事务失效，因为线程不属于spring托管，线程不能默认使用spring的事务，也不能获取spring注入的bean。需要保证新线程内没有涉及新的事务操作，或者线程的实现方法使用`@Transactonal`，将事务传递进去。如果方法本身是多线程的，可以使用异步注解`@Async`的方法再加上注解`@Transactional`，保证新线程调用的方法是有事务管理的。

**14. 用的什么持久层框架（Mybatis），用过Mybatis-plus吗**（我说我之前做过一个小的demo可以从数据库表直接生成需要的类，面试官十分感兴趣，但我说的不太好😅）

**15. SQL题：用户表和vip表，查处用户id为1，2，3，5，7，8，9中积分前三的vip用户姓名和积分；**

```sql
select u.user_name, v.credit from 
(select user_name, id, vip_id 
from user_info where id in(1,2,3,5,7,8,9)) as u
left join vip_info as v on u.vip_id = v.id
order by v.credit
limit 0, 3
```

**为什么要写子查询，为什么用where不用join，三种join有什么区别；**

**假如子查询后用left join的话应该把哪张表放左边**（user表，因为不一定所有的用户都是vip）

已经限定在小部分了，而后通过left join 小表驱动大表，这样比直接联查后再筛选所需id要更好

**15. 有没有前端开发经验（直接说了不会，项目只做了后端）**

**16. Git怎么新建分支（不会，没用过协同，最多是自己一个master到底）**

```shell
git branch \<new-branch>新建一个分支
git checkout \<branch>切换到指定分支
git merge \<branch> 合并指定分支到当前分支
git rebase \<branch> 变基（将指定分支的修改应用到本分支）
git pull \<remote>\<branch>拉取远端代码并合并到本地 == fetch+merge 先commit到本地，再push到远程仓库
```

- **反问：** 没有算法题吗（面试官说他不喜欢考算法题）；实习生大概做什么工作；有什么建议吗（夸了我代码能力扎实😄）



## 9.2 算力大陆二面

上来直接提问，没有自我介绍环节

**1. 为什么想着要做一个RPC项目；五种序列化方式他们有什么特点吗，他们之间有什么区别，最常用的是哪个**

**2. 心跳机制是为了避免重复连接，那重复连接的缺点有哪些呢**

**3. 测试分布式的性能有哪些指标（**吞吐量qps、延迟、可扩展性、可用性和一致性**）**

**4. 两个算法题，描述思路即可：有序链表合并（秒了），最小覆盖子串（hash统计，双指针滑动，秒了）**

**5. 项目里面如何处理异常**（受检查异常提前处理，可能遇到的运行时异常catch好往外抛，统一拦截器进行处理或者记录）**

**6. 项目登录鉴权这方面是怎么做的**（token放localstorage，每次请求带过来）

**7. 大文件上传怎么做的；文件上传能不能用户直传，不通过服务器；有哪些隐患**（用户不在线会阻塞在缓冲区，难以进行监管）

**8. 对大模型有什么了解吗**（不太知道，问答比较厉害）

- 反问：实习生大概做什么工作

